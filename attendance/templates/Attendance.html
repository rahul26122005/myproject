<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance</title>
</head>
<body>
    <h1>Mark Attendance</h1>
    
    <form method="GET" action="{% url 'take_attendance' %}">
        <label for="class">Class:</label>
        <select name="class" id="class">
            <option value="">Select Class</option>
            {% for class in classes %}
                <option value="{{ class }}" {% if class == selected_class %}selected{% endif %}>{{ class }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Class</button>
    </form>

    {% if selected_class %}
    <form method="GET" action="{% url 'take_attendance' %}">
        <input type="hidden" name="class" value="{{ selected_class }}">
        <label for="section">Section:</label>
        <select name="section" id="section">
            <option value="">Select Section</option>
            {% for section in sections %}
                <option value="{{ section }}" {% if section == selected_section %}selected{% endif %}>{{ section }}</option>
            {% endfor %}
        </select>
        <button type="submit">Select Section</button>
    </form>
    {% endif %}

    {% if students %}
    <form method="POST" action="{% url 'take_attendance' %}">
        {% csrf_token %}
        <input type="hidden" name="class" value="{{ selected_class }}">
        <input type="hidden" name="section" value="{{ selected_section }}">
        
        <table>
            <tr>
                <th>Student Name</th>
                <th>Status</th>
            </tr>
            {% for student in students %}
            <tr>
                <td>{{ student.name }}</td>
                <td>
                    <select name="status_{{ student.id }}">
                        <option value="present">Present</option>
                        <option value="absent">Absent</option>
                    </select>
                </td>
            </tr>
            {% endfor %}
        </table>

        <button type="submit">Submit Attendance</button>
    </form>
    {% endif %}
</body>
</html>
